
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Processors &#8212; CIL 23.1.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles/pydata-sphinx-theme.css" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Recon" href="recon.html" />
    <link rel="prev" title="Optimisation framework" href="optimisation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">CIL</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="introduction.html">
  Introduction
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="framework.html">
  Framework
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="io.html">
  Read/ write AcquisitionData and ImageData
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="optimisation.html">
  Optimisation framework
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Processors
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="recon.html">
  Recon
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="utilities.html">
  Utilities
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="plugins.html">
  CIL Plugins
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="developer_guide.html">
  Developers’ Guide
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items">
<h3><a href="index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="framework.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Read/ write AcquisitionData and ImageData</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimisation.html">Optimisation framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimisation.html#block-framework">Block Framework</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Processors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-manipulation">Data Manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-slicer">Data Slicer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-binner">Data Binner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-padder">Data Padder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mask-generator-from-data">Mask Generator from Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-masking">Data Masking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre-processors">Pre-processors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#centre-of-rotation-corrector">Centre Of Rotation Corrector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-normaliser">Data Normaliser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transmission-to-absorption-converter">Transmission to Absorption Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#absorption-to-transmission-converter">Absorption to Transmission Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ring-remover">Ring Remover</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="recon.html">Recon</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">CIL Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developers’ Guide</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/processors.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-manipulation">
   Data Manipulation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-slicer">
     Data Slicer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-binner">
     Data Binner
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-padder">
     Data Padder
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mask-generator-from-data">
     Mask Generator from Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-masking">
     Data Masking
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pre-processors">
   Pre-processors
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#centre-of-rotation-corrector">
     Centre Of Rotation Corrector
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-normaliser">
     Data Normaliser
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#transmission-to-absorption-converter">
     Transmission to Absorption Converter
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#absorption-to-transmission-converter">
     Absorption to Transmission Converter
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ring-remover">
     Ring Remover
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="processors">
<h1>Processors<a class="headerlink" href="#processors" title="Permalink to this headline">#</a></h1>
<p>This module allows the user to manipulate or pre-process their data.</p>
<div class="section" id="data-manipulation">
<h2>Data Manipulation<a class="headerlink" href="#data-manipulation" title="Permalink to this headline">#</a></h2>
<p>These processors can be used on <cite>ImageData</cite> or <cite>AcquisitionData</cite> objects.</p>
<div class="section" id="data-slicer">
<h3>Data Slicer<a class="headerlink" href="#data-slicer" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.Slicer">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">Slicer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Slicer.html#Slicer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Slicer" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a Slicer processor.</p>
<p>The processor will crop the data, and then return every n input pixels along a dimension from the starting index.</p>
<p>The output will be a data container with the data, and geometry updated to reflect the operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>roi</strong> (<em>dict</em>) – <p>The region-of-interest to bin {‘axis_name1’:(start,stop,step), ‘axis_name2’:(start,stop,step)}
The <cite>key</cite> being the axis name to apply the processor to, the <cite>value</cite> holding a tuple containing the ROI description</p>
<p>Start: Starting index of input data. Must be an integer, or <cite>None</cite> defaults to index 0.
Stop: Stopping index of input data. Must be an integer, or <cite>None</cite> defaults to index N.
Step: Number of pixels to average together. Must be an integer or <cite>None</cite> defaults to 1.</p>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">Slicer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;horizontal&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;vertical&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Slicer</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_sliced</span><span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">Slicer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;horizontal&#39;</span><span class="p">:(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;vertical&#39;</span><span class="p">:(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">2</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Slicer</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geometry_sliced</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The indices provided are start inclusive, stop exclusive.</p>
<p>All elements along a dimension will be included if the axis does not appear in the roi dictionary, or if passed as {‘axis_name’,-1}</p>
<p>If only one number is provided, then it is interpreted as Stop. i.e. {‘axis_name1’:(stop)}
If two numbers are provided, then they are interpreted as Start and Stop  i.e. {‘axis_name1’:(start, stop)}</p>
<p>Negative indexing can be used to specify the index. i.e. {‘axis_name1’:(10, -10)} will crop the dimension symmetrically</p>
<p>If Stop - Start is not multiple of Step, then
the resulted dimension will have (Stop - Start) // Step
elements, i.e. (Stop - Start) % Step elements will be ignored</p>
</div>
<dl class="py method">
<dt id="cil.processors.Slicer.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Slicer.html#Slicer.set_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Slicer.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data or geometry to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>Geometry</em>) – The input DataContainer or Geometry</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Slicer.process">
<code class="sig-name descname"><span class="pre">process</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Slicer.html#Slicer.process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Slicer.process" title="Permalink to this definition">#</a></dt>
<dd><p>Processes the input data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed output and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The downsampled output is returned. Depending on the input type this may be:
ImageData, AcquisitionData, DataContainer, ImageGeometry, AcquisitionGeometry</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Slicer.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Slicer.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-binner">
<h3>Data Binner<a class="headerlink" href="#data-binner" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.Binner">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">Binner</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accelerated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Binner.html#Binner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Binner" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a Binner processor.</p>
<p>The processor will crop the data, and then average together n input pixels along a dimension from the starting index.</p>
<p>The output will be a data container with the data, and geometry updated to reflect the operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roi</strong> (<em>dict</em>) – <p>The region-of-interest to bin {‘axis_name1’:(start,stop,step), ‘axis_name2’:(start,stop,step)}
The <cite>key</cite> being the axis name to apply the processor to, the <cite>value</cite> holding a tuple containing the ROI description</p>
<p>Start: Starting index of input data. Must be an integer, or <cite>None</cite> defaults to index 0.
Stop: Stopping index of input data. Must be an integer, or <cite>None</cite> defaults to index N.
Step: Number of pixels to average together. Must be an integer or <cite>None</cite> defaults to 1.</p>
</p></li>
<li><p><strong>accelerated</strong> (<em>boolean</em><em>, </em><em>default=True</em>) – Uses the CIL accelerated backend if <cite>True</cite>, numpy if <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">Binner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;horizontal&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;vertical&#39;</span><span class="p">:(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Binner</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_binned</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">Binner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;horizontal&#39;</span><span class="p">:(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;vertical&#39;</span><span class="p">:(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">2</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Binner</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geometry_binned</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The indices provided are start inclusive, stop exclusive.</p>
<p>All elements along a dimension will be included if the axis does not appear in the roi dictionary, or if passed as {‘axis_name’,-1}</p>
<p>If only one number is provided, then it is interpreted as Stop. i.e. {‘axis_name1’:(stop)}
If two numbers are provided, then they are interpreted as Start and Stop  i.e. {‘axis_name1’:(start, stop)}</p>
<p>Negative indexing can be used to specify the index. i.e. {‘axis_name1’:(10, -10)} will crop the dimension symmetrically</p>
<p>If Stop - Start is not multiple of Step, then
the resulted dimension will have (Stop - Start) // Step
elements, i.e. (Stop - Start) % Step elements will be ignored</p>
</div>
<dl class="py method">
<dt id="cil.processors.Binner.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Binner.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Binner.process">
<code class="sig-name descname"><span class="pre">process</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Binner.process" title="Permalink to this definition">#</a></dt>
<dd><p>Processes the input data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed output and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The downsampled output is returned. Depending on the input type this may be:
ImageData, AcquisitionData, DataContainer, ImageGeometry, AcquisitionGeometry</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Binner.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Binner.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data or geometry to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>Geometry</em>) – The input DataContainer or Geometry</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-padder">
<h3>Data Padder<a class="headerlink" href="#data-padder" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.Padder">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">Padder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'constant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder" title="Permalink to this definition">#</a></dt>
<dd><p>Processor to pad an array with a border, wrapping numpy.pad. See <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.pad.html">https://numpy.org/doc/stable/reference/generated/numpy.pad.html</a></p>
<p>It is recommended to use the static methods to configure your Padder object rather than initialising this class directly. See examples for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<em>str</em>) – The method used to populate the border data. Accepts: ‘constant’, ‘edge’, ‘linear_ramp’, ‘reflect’, ‘symmetric’, ‘wrap’</p></li>
<li><p><strong>pad_width</strong> (<em>int</em><em>, </em><em>tuple</em><em>, </em><em>dict</em>) – The size of the border along each axis, see usage notes</p></li>
<li><p><strong>pad_values</strong> (<em>float</em><em>, </em><em>tuple</em><em>, </em><em>dict</em><em>, </em><em>default=0.0</em>) – The additional values needed by some of the modes</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
<dt><cite>pad_values</cite> behaviour:</dt><dd><ul class="simple">
<li><p>float: Each border will use this value</p></li>
<li><p>tuple(float, float): Each value will be used asymmetrically for each axis i.e. (before, after)</p></li>
<li><p>dict: Specified axes and values: e.g. {‘horizontal’:(8, 23), ‘channel’:5}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 0. 1. 2. 2.]</span>
<span class="go">[0. 0. 1. 2. 2.]</span>
<span class="go">[3. 3. 4. 5. 5.]</span>
<span class="go">[6. 6. 7. 8. 8.]</span>
<span class="go">[6. 6. 7. 8. 8.]]</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;horizontal_y&#39;</span><span class="p">:(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="s1">&#39;horizontal_x&#39;</span><span class="p">:(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)},</span> <span class="n">constant_values</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[-1. -1. -1. -1.  1.  1.]</span>
<span class="go">[-1.  0.  1.  2.  1.  1.]</span>
<span class="go">[-1.  3.  4.  5.  1.  1.]</span>
<span class="go">[-1.  6.  7.  8.  1.  1.]</span>
<span class="go">[-1.  1.  1.  1.  1.  1.]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="cil.processors.Padder.constant">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">constant</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constant_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.constant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.constant" title="Permalink to this definition">#</a></dt>
<dd><p>Padder processor wrapping numpy.pad with mode <cite>constant</cite>.</p>
<p>Pads the data with a constant value border. Pads in all <em>spatial</em>
dimensions unless a dictionary is passed to either <cite>pad_width</cite> or <cite>constant_values</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pad_width</strong> (<em>int</em><em>, </em><em>tuple</em><em>, </em><em>dict</em>) – The size of the border along each axis, see usage notes</p></li>
<li><p><strong>constant_values</strong> (<em>float</em><em>, </em><em>tuple</em><em>, </em><em>dict</em><em>, </em><em>default=0.0</em>) – The value of the border, see usage notes</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
<dt><cite>constant_values</cite> behaviour (value of pixels):</dt><dd><ul class="simple">
<li><p>float: Each border will be set to this value</p></li>
<li><p>tuple(float, float): Each border value will be used asymmetrically for each axis i.e. (before, after)</p></li>
<li><p>dict: Specified axes and values: e.g. {‘horizontal’:(8, 23), ‘channel’:5}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">constant_values</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 0. 0. 0. 0.]</span>
<span class="go">[0. 0. 1. 2. 0.]</span>
<span class="go">[0. 3. 4. 5. 0.]</span>
<span class="go">[0. 6. 7. 8. 0.]</span>
<span class="go">[0. 0. 0. 0. 0.]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.edge">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">edge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.edge" title="Permalink to this definition">#</a></dt>
<dd><p>Padder processor wrapping numpy.pad with mode <cite>edge</cite>.</p>
<p>Pads the data by extending the edge values in to the border. Pads in all <em>spatial</em>
dimensions unless a dictionary is passed to <cite>pad_width</cite>.</p>
<dl class="simple">
<dt>pad_width: int, tuple, dict</dt><dd><p>The size of the border along each axis, see usage notes</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 0. 1. 2. 2.]</span>
<span class="go">[0. 0. 1. 2. 2.]</span>
<span class="go">[3. 3. 4. 5. 5.]</span>
<span class="go">[6. 6. 7. 8. 8.]</span>
<span class="go">[6. 6. 7. 8. 8.]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.linear_ramp">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">linear_ramp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.linear_ramp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.linear_ramp" title="Permalink to this definition">#</a></dt>
<dd><p>Padder processor wrapping numpy.pad with mode <cite>linear_ramp</cite></p>
<p>Pads the data with values calculated from a linear ramp between the array edge
value and the set end_value. Pads in all <em>spatial</em> dimensions unless a dictionary
is passed to either <cite>pad_width</cite> or <cite>constant_values</cite></p>
<dl class="simple">
<dt>pad_width: int, tuple, dict</dt><dd><p>The size of the border along each axis, see usage notes</p>
</dd>
<dt>end_values: float, tuple, dict, default=0.0</dt><dd><p>The target value of the linear_ramp, see usage notes</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
<dt><cite>end_values</cite> behaviour:</dt><dd><ul class="simple">
<li><p>float: Each border will use this end value</p></li>
<li><p>tuple(float, float): Each border end value will be used asymmetrically for each axis i.e. (before, after)</p></li>
<li><p>dict: Specified axes and end values: e.g. {‘horizontal’:(8, 23), ‘channel’:5}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">linear_ramp</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">end_values</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0.  0.  0.  0.  0.  0.  0. ]</span>
<span class="go">[0.  0.  0.  0.5 1.  0.5 0. ]</span>
<span class="go">[0.  0.  0.  1.  2.  1.  0. ]</span>
<span class="go">[0.  1.5 3.  4.  5.  2.5 0. ]</span>
<span class="go">[0.  3.  6.  7.  8.  4.  0. ]</span>
<span class="go">[0.  1.5 3.  3.5 4.  2.  0. ]</span>
<span class="go">[0.  0.  0.  0.  0.  0.  0. ]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.reflect">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">reflect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.reflect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.reflect" title="Permalink to this definition">#</a></dt>
<dd><p>Padder processor wrapping numpy.pad with mode <cite>reflect</cite>.</p>
<p>Pads with the reflection of the data mirrored along first and last values each axis.
Pads in all <em>spatial</em> dimensions unless a dictionary is passed to <cite>pad_width</cite>.</p>
<dl class="simple">
<dt>pad_width: int, tuple, dict</dt><dd><p>The size of the border along each axis, see usage notes</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[4. 3. 4. 5. 4.]</span>
<span class="go">[1. 0. 1. 2. 1.]</span>
<span class="go">[4. 3. 4. 5. 4.]</span>
<span class="go">[7. 6. 7. 8. 7.]</span>
<span class="go">[4. 3. 4. 5. 4.]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.symmetric">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">symmetric</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.symmetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.symmetric" title="Permalink to this definition">#</a></dt>
<dd><p>Padder processor wrapping numpy.pad with mode <cite>symmetric</cite>.</p>
<p>Pads with the reflection of the data mirrored along the edge of the array.
Pads in all <em>spatial</em> dimensions unless a dictionary is passed to <cite>pad_width</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pad_width</strong> (<em>int</em><em>, </em><em>tuple</em><em>, </em><em>dict</em>) – The size of the border along each axis</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">symmetric</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 0. 1. 2. 2.]</span>
<span class="go">[0. 0. 1. 2. 2.]</span>
<span class="go">[3. 3. 4. 5. 5.]</span>
<span class="go">[6. 6. 7. 8. 8.]</span>
<span class="go">[6. 6. 7. 8. 8.]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.wrap">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">wrap</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pad_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.wrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.wrap" title="Permalink to this definition">#</a></dt>
<dd><p>Padder processor wrapping numpy.pad with mode <cite>wrap</cite>.</p>
<p>Pads with the wrap of the vector along the axis. The first values are used to pad the
end and the end values are used to pad the beginning. Pads in all <em>spatial</em> dimensions
unless a dictionary is passed to <cite>pad_width</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pad_width</strong> (<em>int</em><em>, </em><em>tuple</em><em>, </em><em>dict</em>) – The size of the border along each axis</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="simple">
<dt><cite>pad_width</cite> behaviour (number of pixels):</dt><dd><ul class="simple">
<li><p>int: Each axis will be padded with a border of this size</p></li>
<li><p>tuple(int, int): Each axis will be padded with an asymmetric border i.e. (before, after)</p></li>
<li><p>dict: Specified axes will be padded: e.g. {‘horizontal’:(8, 23), ‘vertical’: 10}</p></li>
</ul>
</dd>
</dl>
<p>If padding angles the angular values assigned to the padded axis will be extrapolated from the first two,
and the last two angles in geometry.angles. The user should ensure the output is as expected.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">Padder</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">pad_width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_padded</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[0. 1. 2.]</span>
<span class="go">[3. 4. 5.]</span>
<span class="go">[6. 7. 8.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data_padded</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[8. 6. 7. 8. 6.]</span>
<span class="go">[2. 0. 1. 2. 0.]</span>
<span class="go">[5. 3. 4. 5. 3.]</span>
<span class="go">[8. 6. 7. 8. 6.]</span>
<span class="go">[2. 0. 1. 2. 0.]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Padder.html#Padder.set_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Padder.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>Geometry</em>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Padder.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Padder.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mask-generator-from-data">
<h3>Mask Generator from Data<a class="headerlink" href="#mask-generator-from-data" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.MaskGenerator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">MaskGenerator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'special_values'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(None,</span> <span class="pre">None)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(None,</span> <span class="pre">None)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/MaskGenerator.html#MaskGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.MaskGenerator" title="Permalink to this definition">#</a></dt>
<dd><p>Processor to detect outliers and return a mask with 0 where outliers were detected, and 1 for other pixels. Please use the desiried method to configure a processor for your needs.</p>
<dl class="py method">
<dt id="cil.processors.MaskGenerator.special_values">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">special_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/MaskGenerator.html#MaskGenerator.special_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.MaskGenerator.special_values" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a MaskGenerator processor which generates a mask for inf and/or nan values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nan</strong> (<em>bool</em><em>, </em><em>default=True</em>) – mask NaN values</p></li>
<li><p><strong>inf</strong> (<em>bool</em><em>, </em><em>default=True</em>) – mask INF values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.MaskGenerator.threshold">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">threshold</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/MaskGenerator.html#MaskGenerator.threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.MaskGenerator.threshold" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a MaskGenerator processor which generates a mask for values outside boundaries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_val</strong> (<em>float</em><em>, </em><em>default=None</em>) – lower boundary</p></li>
<li><p><strong>max_val</strong> (<em>float</em><em>, </em><em>default=None</em>) – upper boundary</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.MaskGenerator.quantile">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">quantile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_quantile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_quantile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/MaskGenerator.html#MaskGenerator.quantile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.MaskGenerator.quantile" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a MaskGenerator processor which generates a mask for values outside boundaries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_quantile</strong> (<em>float</em><em>, </em><em>default=None</em>) – lower quantile, 0-1</p></li>
<li><p><strong>max_quantile</strong> (<em>float</em><em>, </em><em>default=None</em>) – upper quantile, 0-1</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.MaskGenerator.mean">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">mean</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/MaskGenerator.html#MaskGenerator.mean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.MaskGenerator.mean" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a MaskGenerator processor which generates a mask for values outside a multiple of standard-devaiations from the mean.</p>
<p>abs(A - mean(A)) &lt; threshold_factor * std(A).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold_factor</strong> (<em>float</em><em>, </em><em>default=3</em>) – scale factor of standard-deviations to use as threshold</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>string</em>) – specify axis as int or from ‘dimension_labels’ to calculate mean. If no axis is specified then operates over flattened array.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>default=None</em>) – specify number of pixels to use in calculation of a rolling mean</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.MaskGenerator.median">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">median</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/MaskGenerator.html#MaskGenerator.median"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.MaskGenerator.median" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a MaskGenerator processor which generates a mask for values outside a multiple of median absolute deviation (MAD) from the mean.</p>
<p>abs(A - median(A)) &lt; threshold_factor * MAD(A),
MAD = c*median(abs(A-median(A))) where c=-1/(sqrt(2)*erfcinv(3/2))</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold_factor</strong> (<em>float</em><em>, </em><em>default=3</em>) – scale factor of MAD to use as threshold</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>string</em>) – specify axis as int or from ‘dimension_labels’ to calculate mean. If no axis is specified then operates over flattened array.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>default=None</em>) – specify number of pixels to use in calculation of a rolling median</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.MaskGenerator.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.MaskGenerator.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.MaskGenerator.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.MaskGenerator.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-masking">
<h3>Data Masking<a class="headerlink" href="#data-masking" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.Masker">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">Masker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Masker.html#Masker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Masker" title="Permalink to this definition">#</a></dt>
<dd><p>Processor to fill missing values provided by mask. Please use the desiried method to configure a processor for your needs.</p>
<dl class="py method">
<dt id="cil.processors.Masker.value">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Masker.html#Masker.value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Masker.value" title="Permalink to this definition">#</a></dt>
<dd><p>This sets the masked values of the input data to the requested value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><em>numpy.ndarray</em>) – A boolean array with the same dimensions as input, where ‘False’ represents masked values. Mask can be generated using ‘MaskGenerator’ processor to identify outliers.</p></li>
<li><p><strong>value</strong> (<em>float</em><em>, </em><em>default=0</em>) – values to be assigned to missing elements</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Masker.mean">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">mean</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Masker.html#Masker.mean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Masker.mean" title="Permalink to this definition">#</a></dt>
<dd><p>This sets the masked values of the input data to the mean of the unmasked values across the array or axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><em>numpy.ndarray</em>) – A boolean array with the same dimensions as input, where ‘False’ represents masked values. Mask can be generated using ‘MaskGenerator’ processor to identify outliers.</p></li>
<li><p><strong>axis</strong> (<em>str</em><em>, </em><em>int</em>) – specify axis as int or from ‘dimension_labels’ to calculate mean.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Masker.median">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">median</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Masker.html#Masker.median"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Masker.median" title="Permalink to this definition">#</a></dt>
<dd><p>This sets the masked values of the input data to the median of the unmasked values across the array or axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><em>numpy.ndarray</em>) – A boolean array with the same dimensions as input, where ‘False’ represents masked values. Mask can be generated using ‘MaskGenerator’ processor to identify outliers.</p></li>
<li><p><strong>axis</strong> (<em>str</em><em>, </em><em>int</em>) – specify axis as int or from ‘dimension_labels’ to calculate median.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Masker.interpolate">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">interpolate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Masker.html#Masker.interpolate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Masker.interpolate" title="Permalink to this definition">#</a></dt>
<dd><p>This operates over the specified axis and uses 1D interpolation over remaining flattened array to fill in missing vaues.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><em>numpy.ndarray</em>) – A boolean array with the same dimensions as input, where ‘False’ represents masked values. Mask can be generated using ‘MaskGenerator’ processor to identify outliers.</p></li>
<li><p><strong>axis</strong> (<em>str</em><em>, </em><em>int</em>) – specify axis as int or from ‘dimension_labels’ to loop over and perform 1D interpolation.</p></li>
<li><p><strong>method</strong> – One of the following interpoaltion methods: linear, nearest, zeros, linear, quadratic, cubic, previous, next</p></li>
<li><p><strong>method</strong> – str, default=’linear’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Masker.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Masker.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Masker.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Masker.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="pre-processors">
<h2>Pre-processors<a class="headerlink" href="#pre-processors" title="Permalink to this headline">#</a></h2>
<p>These processors can be used with <cite>AcquisitionData</cite> objects</p>
<div class="section" id="centre-of-rotation-corrector">
<h3>Centre Of Rotation Corrector<a class="headerlink" href="#centre-of-rotation-corrector" title="Permalink to this headline">#</a></h3>
<p>In the ideal alignment of a CT instrument, the projection of the axis of rotation onto the
detector coincides with the vertical midline of the detector. In practice this is hard to achieve
due to misalignments and/or kinematic errors in positioning of CT instrument components.
A slight offset of the center of rotation with respect to the theoretical position will contribute
to the loss of resolution; in more severe cases, it will cause severe artifacts in the reconstructed
volume (double-borders).</p>
<p><code class="code docutils literal notranslate"><span class="pre">CentreOfRotationCorrector</span></code> can be used to estimate the offset of center of rotation from the data.</p>
<p><code class="code docutils literal notranslate"><span class="pre">CentreOfRotationCorrector</span></code> supports both parallel and cone-beam geometry with 2 different algorithms:</p>
<ul class="simple">
<li><p>Cross-correlation, is suitable for single slice parallel-beam geometry. It requires two projections 180 degree apart.</p></li>
<li><p>Image sharpness method, which maximising the sharpness of a reconstructed slice. It can be used on single</p></li>
</ul>
<p>slice parallel-beam, and centre-slice of cone-beam geometry. For use only with datasets that can be reconstructed with FBP/FDK.</p>
<dl class="py class">
<dt id="cil.processors.CentreOfRotationCorrector">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">CentreOfRotationCorrector</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attributes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/CentreOfRotationCorrector.html#CentreOfRotationCorrector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.CentreOfRotationCorrector" title="Permalink to this definition">#</a></dt>
<dd><p>This class contains methods to create a CentreOfRotationCorrector processor using the desired algorithm.</p>
<dl class="py method">
<dt id="cil.processors.CentreOfRotationCorrector.xcorrelation">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">xcorrelation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slice_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'centre'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projection_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ang_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/CentreOfRotationCorrector.html#CentreOfRotationCorrector.xcorrelation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.CentreOfRotationCorrector.xcorrelation" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a CentreOfRotationCorrector processor using the cross-correlation algorithm.</p>
<p>For use on parallel-beam geometry it requires two projections 180 degree apart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slice_index</strong> (<em>int</em><em>, </em><em>str='centre'</em><em>, </em><em>default='centre'</em>) – An integer defining the vertical slice to run the algorithm on.</p></li>
<li><p><strong>projection_index</strong> (<em>int</em>) – An integer defining the first projection the algorithm will use. The second projection at 180 degrees will be located automatically.</p></li>
<li><p><strong>ang_tol</strong> (<em>float</em><em>, </em><em>default=0.1</em>) – The angular tolerance in degrees between the two input projections 180 degree gap</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">CentreOfRotationCorrector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">CentreOfRotationCorrector</span><span class="o">.</span><span class="n">xcorrelation</span><span class="p">(</span><span class="s1">&#39;centre&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_centred</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_ouput</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">CentreOfRotationCorrector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">CentreOfRotationCorrector</span><span class="o">.</span><span class="n">xcorrelation</span><span class="p">(</span><span class="n">slice_index</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">get_ouput</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cil.processors</span> <span class="kn">import</span> <span class="n">CentreOfRotationCorrector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cil_log_level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;cil.processors&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cil_log_level</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">CentreOfRotationCorrector</span><span class="o">.</span><span class="n">xcorrelation</span><span class="p">(</span><span class="n">slice_index</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_centred</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">get_ouput</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>setting logging to ‘debug’ will give you more information about the algorithm progress</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.CentreOfRotationCorrector.image_sharpness">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">image_sharpness</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slice_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'centre'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tigre'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.005</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/CentreOfRotationCorrector.html#CentreOfRotationCorrector.image_sharpness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.CentreOfRotationCorrector.image_sharpness" title="Permalink to this definition">#</a></dt>
<dd><p>This creates a CentreOfRotationCorrector processor.</p>
<p>The processor will find the centre offset by maximising the sharpness of a reconstructed slice.</p>
<p>Can be used on single slice parallel-beam, and centre slice cone beam geometry. For use only with datasets that can be reconstructed with FBP/FDK.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slice_index</strong> (<em>int</em><em>, </em><em>str</em><em>, </em><em>default='centre'</em>) – An integer defining the vertical slice to run the algorithm on. The special case slice ‘centre’ is the default.</p></li>
<li><p><strong>backend</strong> (<em>{'tigre'</em><em>, </em><em>'astra'}</em>) – The backend to use for the reconstruction</p></li>
<li><p><strong>tolerance</strong> (<em>float</em><em>, </em><em>default=0.005</em>) – The tolerance of the fit in pixels, the default is 1/200 of a pixel. This is a stopping criteria, not a statement of accuracy of the algorithm.</p></li>
<li><p><strong>search_range</strong> (<em>int</em>) – The range in pixels to search either side of the panel centre. If <cite>None</cite> a quarter of the width of the panel is used.</p></li>
<li><p><strong>initial_binning</strong> (<em>int</em>) – The size of the bins for the initial search. If <cite>None</cite> will bin the image to a step corresponding to &lt;128 pixels. The fine search will be on unbinned data.</p></li>
</ul>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><p><strong>**kwargs</strong> (<em>dict</em>) – FBP : The FBP class to use as the backend imported from <cite>cil.plugins.[backend].FBP</cite>  - This has been deprecated please use ‘backend’ instead</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>from cil.processors import CentreOfRotationCorrector</p>
<p>processor = CentreOfRotationCorrector.image_sharpness(‘centre’, ‘tigre’)
processor.set_input(data)
data_centred = processor.get_output()</p>
<p class="rubric">Example</p>
<p>from cil.processors import CentreOfRotationCorrector</p>
<p>processor = CentreOfRotationCorrector.image_sharpness(slice_index=120, ‘astra’)
processor.set_input(data)
processor.get_output(out=data)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For best results data should be 360deg which leads to blurring with incorrect geometry.
This method is unreliable on half-scan data with ‘tuning-fork’ style artifacts.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.CentreOfRotationCorrector.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.CentreOfRotationCorrector.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.CentreOfRotationCorrector.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.CentreOfRotationCorrector.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-normaliser">
<h3>Data Normaliser<a class="headerlink" href="#data-normaliser" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.Normaliser">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">Normaliser</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flat_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-05</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Normaliser.html#Normaliser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Normaliser" title="Permalink to this definition">#</a></dt>
<dd><p>Normalisation based on flat and dark</p>
<p>This processor read in a AcquisitionData and normalises it based on
the instrument reading with and without incident photons or neutrons.</p>
<p>Input: AcquisitionData
Parameter: 2D projection with flat field (or stack)</p>
<blockquote>
<div><p>2D projection with dark field (or stack)</p>
</div></blockquote>
<p>Output: AcquisitionDataSetn</p>
<dl class="py method">
<dt id="cil.processors.Normaliser.estimate_normalised_error">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">estimate_normalised_error</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">projection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_flat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_dark</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/Normaliser.html#Normaliser.estimate_normalised_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.Normaliser.estimate_normalised_error" title="Permalink to this definition">#</a></dt>
<dd><p>returns the estimated relative error of the normalised projection</p>
<p>n = (projection - dark) / (flat - dark)
Dn/n = (flat-dark + projection-dark)/((flat-dark)*(projection-dark))*(Df/f + Dd/d)</p>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Normaliser.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Normaliser.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.Normaliser.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.Normaliser.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="transmission-to-absorption-converter">
<h3>Transmission to Absorption Converter<a class="headerlink" href="#transmission-to-absorption-converter" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.TransmissionAbsorptionConverter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">TransmissionAbsorptionConverter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/TransmissionAbsorptionConverter.html#TransmissionAbsorptionConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.TransmissionAbsorptionConverter" title="Permalink to this definition">#</a></dt>
<dd><p>Processor to convert from transmission measurements to absorption
based on the Beer-Lambert law</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>white_level</strong> (<em>float</em><em>, </em><em>optional</em>) – A float defining incidence intensity in the Beer-Lambert law.</p></li>
<li><p><strong>min_intensity</strong> (<em>float</em><em>, </em><em>optional</em>) – A float defining some threshold to avoid 0 in log, is applied after normalisation by white_level</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns AcquisitionData, ImageData or DataContainer depending on input data type, return is suppressed if ‘out’ is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData">AcquisitionData</a>, <a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData">ImageData</a> or <a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
<p>Processor first divides by white_level (default=1) and then take negative logarithm.
Elements below threshold (after division by white_level) are set to threshold.</p>
<dl class="py method">
<dt id="cil.processors.TransmissionAbsorptionConverter.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.TransmissionAbsorptionConverter.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.TransmissionAbsorptionConverter.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.TransmissionAbsorptionConverter.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="absorption-to-transmission-converter">
<h3>Absorption to Transmission Converter<a class="headerlink" href="#absorption-to-transmission-converter" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.AbsorptionTransmissionConverter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">AbsorptionTransmissionConverter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">white_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/AbsorptionTransmissionConverter.html#AbsorptionTransmissionConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.AbsorptionTransmissionConverter" title="Permalink to this definition">#</a></dt>
<dd><p>Processor to convert from absorption measurements to transmission</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>white_level</strong> (<em>float</em><em>, </em><em>optional</em>) – A float defining incidence intensity in the Beer-Lambert law.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns AcquisitionData, ImageData or DataContainer depending on input data type</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData">AcquisitionData</a>, <a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData">ImageData</a> or <a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
<p>Processor first multiplies data by -1, then calculates exponent
and scales result by white_level (default=1)</p>
<dl class="py method">
<dt id="cil.processors.AbsorptionTransmissionConverter.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.AbsorptionTransmissionConverter.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.AbsorptionTransmissionConverter.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.AbsorptionTransmissionConverter.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ring-remover">
<h3>Ring Remover<a class="headerlink" href="#ring-remover" title="Permalink to this headline">#</a></h3>
<dl class="py class">
<dt id="cil.processors.RingRemover">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.processors.</span></code><code class="sig-name descname"><span class="pre">RingRemover</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">decNum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/RingRemover.html#RingRemover"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.RingRemover" title="Permalink to this definition">#</a></dt>
<dd><p>RingRemover Processor: Removes vertical stripes from a DataContainer(ImageData/AcquisitionData)
the algorithm in <a class="reference external" href="https://doi.org/10.1364/OE.17.008567">https://doi.org/10.1364/OE.17.008567</a></p>
<dl class="py method">
<dt id="cil.processors.RingRemover.xRemoveStripesVertical">
<code class="sig-name descname"><span class="pre">xRemoveStripesVertical</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ima</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decNum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/processors/RingRemover.html#RingRemover.xRemoveStripesVertical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.processors.RingRemover.xRemoveStripesVertical" title="Permalink to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Code from <a class="reference external" href="https://doi.org/10.1364/OE.17.008567">https://doi.org/10.1364/OE.17.008567</a></dt><dd><p>translated in Python</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Corrected 2D sinogram data (Numpy Array)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.RingRemover.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.RingRemover.get_output" title="Permalink to this definition">#</a></dt>
<dd><p>Runs the configured processor and returns the processed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>out</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><em>optional</em>) – Fills the referenced DataContainer with the processed data and suppresses the return</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The processed data. Suppressed if <cite>out</cite> is passed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer">DataContainer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.processors.RingRemover.set_input">
<code class="sig-name descname"><span class="pre">set_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cil.processors.RingRemover.set_input" title="Permalink to this definition">#</a></dt>
<dd><p>Set the input data to the processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a>) – The input DataContainer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p><a class="reference internal" href="index.html#mastertoc"><span class="std std-ref">Return Home</span></a></p>
</div>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="optimisation.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Optimisation framework</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="recon.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Recon</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2017-2021 UKRI-STFC, University of Manchester.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>