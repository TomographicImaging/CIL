
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Read/ write AcquisitionData and ImageData &#8212; CIL 22.1.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles/pydata-sphinx-theme.css" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Optimisation framework" href="optimisation.html" />
    <link rel="prev" title="Framework" href="framework.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">CIL</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="introduction.html">
  Introduction
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="framework.html">
  Framework
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Read/ write AcquisitionData and ImageData
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="optimisation.html">
  Optimisation framework
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="processors.html">
  Processors
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="recon.html">
  Recon
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="utilities.html">
  Utilities
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="plugins.html">
  CIL Plugins
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="developer_guide.html">
  Developer’s guide
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items">
<h3><a href="index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="framework.html">Framework</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Read/ write AcquisitionData and ImageData</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nexus">NeXuS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nikon">Nikon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zeiss">ZEISS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tiff-reader-writer">TIFF Reader/Writer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hdf5-utilities">HDF5 Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="optimisation.html">Optimisation framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimisation.html#block-framework">Block Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="processors.html">Processors</a></li>
<li class="toctree-l1"><a class="reference internal" href="recon.html">Recon</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">CIL Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer’s guide</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/io.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nexus">
   NeXuS
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nikon">
   Nikon
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zeiss">
   ZEISS
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tiff-reader-writer">
   TIFF Reader/Writer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hdf5-utilities">
   HDF5 Utilities
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="read-write-acquisitiondata-and-imagedata">
<h1>Read/ write AcquisitionData and ImageData<a class="headerlink" href="#read-write-acquisitiondata-and-imagedata" title="Permalink to this headline">#</a></h1>
<div class="section" id="nexus">
<h2>NeXuS<a class="headerlink" href="#nexus" title="Permalink to this headline">#</a></h2>
<p>The CCPi Framework provides classes to read and write <code class="code docutils literal notranslate"><span class="pre">AcquisitionData</span></code> and <code class="code docutils literal notranslate"><span class="pre">ImageData</span></code>
as NeXuS files.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># imports</span>
<span class="kn">from</span> <span class="nn">cil.io</span> <span class="kn">import</span> <span class="n">NEXUSDataWriter</span><span class="p">,</span> <span class="n">NEXUSDataReader</span>

<span class="c1"># initialise NEXUS Writer</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">NEXUSDataWriter</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">set_up</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;tmp_nexus.nxs&#39;</span><span class="p">,</span>
            <span class="n">data_container</span><span class="o">=</span><span class="n">my_data</span><span class="p">)</span>
<span class="c1"># write data</span>
<span class="n">writer</span><span class="o">.</span><span class="n">write_file</span><span class="p">()</span>

<span class="c1"># read data</span>
<span class="c1"># initialize NEXUS reader</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">NEXUSDataReader</span><span class="p">()</span>
<span class="n">reader</span><span class="o">.</span><span class="n">set_up</span><span class="p">(</span><span class="n">nexus_file</span><span class="o">=</span><span class="s1">&#39;tmp_nexus.nxs&#39;</span><span class="p">)</span>
<span class="c1"># load data</span>
<span class="n">ad1</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="c1"># get AcquisitionGeometry</span>
<span class="n">ag1</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">get_geometry</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py class">
<dt id="cil.io.NEXUSDataReader">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.</span></code><code class="sig-name descname"><span class="pre">NEXUSDataReader</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader" title="Permalink to this definition">#</a></dt>
<dd><p>Create a reader for NeXus files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Arguments to the constructor. One of these should be <cite>file_name</cite>.</p>
</dd>
</dl>
<dl class="py method">
<dt id="cil.io.NEXUSDataReader.set_up">
<code class="sig-name descname"><span class="pre">set_up</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.set_up"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.set_up" title="Permalink to this definition">#</a></dt>
<dd><p>Initialise reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> (<em>str</em>) – Full path to NeXus file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataReader.get_geometry">
<code class="sig-name descname"><span class="pre">get_geometry</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.get_geometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.get_geometry" title="Permalink to this definition">#</a></dt>
<dd><p>Parse NEXUS file and return acquisition or reconstructed volume
parameters, depending on file type.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Acquisition or reconstructed volume parameters. Exact type
depends on file content.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="framework.html#cil.framework.AcquisitionGeometry" title="cil.framework.AcquisitionGeometry">AcquisitionGeometry</a> or <a class="reference internal" href="framework.html#cil.framework.ImageGeometry" title="cil.framework.ImageGeometry">ImageGeometry</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataReader.get_data_scale">
<code class="sig-name descname"><span class="pre">get_data_scale</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.get_data_scale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.get_data_scale" title="Permalink to this definition">#</a></dt>
<dd><p>Parse NEXUS file and return the scale factor applied to compress
the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>scale</strong> – The scale factor applied to compress the dataset</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataReader.get_data_offset">
<code class="sig-name descname"><span class="pre">get_data_offset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.get_data_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.get_data_offset" title="Permalink to this definition">#</a></dt>
<dd><p>Parse NEXUS file and return the offset factor applied to compress
the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>offset</strong> – The offset factor applied to compress the dataset</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataReader.read_as_original">
<code class="sig-name descname"><span class="pre">read_as_original</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.read_as_original"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.read_as_original" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the compressed data from the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>output</strong> – The raw, compressed data. Exact type depends on file content.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData">ImageData</a> or <a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData">AcquisitionData</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataReader.read">
<code class="sig-name descname"><span class="pre">read</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.read" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the uncompressed data as numpy.float32.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>output</strong> – The uncompressed data. Exact type depends on file content.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData">ImageData</a> or <a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData">AcquisitionData</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataReader.load_data">
<code class="sig-name descname"><span class="pre">load_data</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataReader.html#NEXUSDataReader.load_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataReader.load_data" title="Permalink to this definition">#</a></dt>
<dd><p>Alias of <cite>read</cite>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#cil.io.NEXUSDataReader.read" title="cil.io.NEXUSDataReader.read"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cil.io.NEXUSDataWriter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.</span></code><code class="sig-name descname"><span class="pre">NEXUSDataWriter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataWriter.html#NEXUSDataWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataWriter" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt id="cil.io.NEXUSDataWriter.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataWriter.html#NEXUSDataWriter.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataWriter.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a>) – The dataset to write to file</p></li>
<li><p><strong>file_name</strong> (<em>os.path</em><em> or </em><em>string</em><em>, </em><em>default None</em>) – file name to write</p></li>
<li><p><strong>compression</strong> (<em>int</em><em>, </em><em>default 0</em>) – The lossy compression to apply, default 0 will not compress data. 8 or 16 will compress to 8 and 16 bit dtypes respectively.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataWriter.set_up">
<code class="sig-name descname"><span class="pre">set_up</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataWriter.html#NEXUSDataWriter.set_up"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataWriter.set_up" title="Permalink to this definition">#</a></dt>
<dd><p>set up writer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a>) – The dataset to write to file</p></li>
<li><p><strong>file_name</strong> (<em>os.path</em><em> or </em><em>string</em><em>, </em><em>default None</em>) – file name to write</p></li>
<li><p><strong>compression</strong> (<em>int</em><em>, </em><em>default 0</em>) – The lossy compression to apply, default 0 will not compress data. 8 or 16 will compress to 8 and 16bit dtypes respectively.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NEXUSDataWriter.write">
<code class="sig-name descname"><span class="pre">write</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NEXUSDataWriter.html#NEXUSDataWriter.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NEXUSDataWriter.write" title="Permalink to this definition">#</a></dt>
<dd><p>write dataset to disk</p>
</dd></dl>

<dl class="py attribute">
<dt id="cil.io.NEXUSDataWriter.__weakref__">
<code class="sig-name descname"><span class="pre">__weakref__</span></code><a class="headerlink" href="#cil.io.NEXUSDataWriter.__weakref__" title="Permalink to this definition">#</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="nikon">
<h2>Nikon<a class="headerlink" href="#nikon" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt id="cil.io.NikonDataReader">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.</span></code><code class="sig-name descname"><span class="pre">NikonDataReader</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NikonDataReader.html#NikonDataReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NikonDataReader" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt id="cil.io.NikonDataReader.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NikonDataReader.html#NikonDataReader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NikonDataReader.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Basic reader for xtekct files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str with full path to .xtekct file</em>) – </p></li>
<li><p><strong>roi</strong> (<em>dictionary with roi to load</em>) – <dl class="simple">
<dt>{‘angle’: (start, end, step),</dt><dd><p>’horizontal’: (start, end, step),
‘vertical’: (start, end, step)}</p>
</dd>
</dl>
<p>Files are stacked along axis_0. axis_1 and axis_2 correspond
to row and column dimensions, respectively.
Files are stacked in alphabetic order.
To skip projections or to change number of projections to load,
adjust ‘angle’. For instance, ‘angle’: (100, 300)
will skip first 100 projections and will load 200 projections.
‘angle’: -1 is a shortcut to load all elements along axis.
Start and end can be specified as None which is equivalent
to start = 0 and end = load everything to the end, respectively.
Start and end also can be negative.</p>
</p></li>
<li><p><strong>normalise</strong> (<em>bool</em><em>, </em><em>normalises loaded projections by detector</em>) – white level (I_0). Default value is True</p></li>
<li><p><strong>fliplr</strong> (<em>bool</em><em>, </em><em>default = False</em><em>, </em><em>flip projections in the left-right direction</em>) – (about vertical axis)</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>'bin'</em><em> (</em><em>default</em><em>) or </em><em>'slice'. In bin mode</em><em>, </em><em>'step' number</em>) – of pixels is binned together, values of resulting binned
pixels are calculated as average.
In ‘slice’ mode ‘step’ defines standard numpy slicing.
Note: in general
output array size in bin mode != output array size in slice mode</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>data with corresponding geometry</strong> (<em>Acquisition</em>) – </p></li>
<li><p><strong>as</strong><strong> [</strong><strong>'angle'</strong> (<em>arranged</em>) – </p></li>
<li><p><strong>horizontal'</strong><strong>]</strong> – </p></li>
<li><p><strong>a single slice is loaded and</strong><strong> [</strong><strong>'vertical</strong> (<em>if</em>) – </p></li>
<li><p><strong>'angle'</strong> – </p></li>
<li><p><strong>horizontal'</strong><strong>]</strong> – </p></li>
<li><p><strong>more than 1 slices are loaded.</strong> (<em>if</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NikonDataReader.get_geometry">
<code class="sig-name descname"><span class="pre">get_geometry</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NikonDataReader.html#NikonDataReader.get_geometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NikonDataReader.get_geometry" title="Permalink to this definition">#</a></dt>
<dd><p>Return AcquisitionGeometry object</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NikonDataReader.get_roi">
<code class="sig-name descname"><span class="pre">get_roi</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NikonDataReader.html#NikonDataReader.get_roi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NikonDataReader.get_roi" title="Permalink to this definition">#</a></dt>
<dd><p>returns the roi</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NikonDataReader.read">
<code class="sig-name descname"><span class="pre">read</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NikonDataReader.html#NikonDataReader.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NikonDataReader.read" title="Permalink to this definition">#</a></dt>
<dd><p>Reads projections and return AcquisitionData container</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.NikonDataReader.load_projections">
<code class="sig-name descname"><span class="pre">load_projections</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/NikonDataReader.html#NikonDataReader.load_projections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.NikonDataReader.load_projections" title="Permalink to this definition">#</a></dt>
<dd><p>alias of read for backward compatibility</p>
</dd></dl>

<dl class="py attribute">
<dt id="cil.io.NikonDataReader.__weakref__">
<code class="sig-name descname"><span class="pre">__weakref__</span></code><a class="headerlink" href="#cil.io.NikonDataReader.__weakref__" title="Permalink to this definition">#</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="zeiss">
<h2>ZEISS<a class="headerlink" href="#zeiss" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt id="cil.io.TXRMDataReader">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.</span></code><code class="sig-name descname"><span class="pre">TXRMDataReader</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/ZEISSDataReader.html#TXRMDataReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TXRMDataReader" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt id="cil.io.TXRMDataReader.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/ZEISSDataReader.html#TXRMDataReader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TXRMDataReader.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>os.path</em><em> or </em><em>string</em>) – file name to read</p></li>
<li><p><strong>roi</strong> (<em>dictionary</em><em>, </em><em>default None</em>) – <p>dictionary with roi to load for each axis.
{‘axis_labels_1’: (start, end, step),</p>
<blockquote>
<div><p>’axis_labels_2’: (start, end, step)}</p>
</div></blockquote>
<p>axis_labels are definied by ImageGeometry and AcquisitionGeometry dimension labels.
e.g. for ImageData to skip files or to change number of files to load,
adjust ‘vertical’. For instance, ‘vertical’: (100, 300)
will skip first 100 files and will load 200 files.
‘axis_label’: -1 is a shortcut to load all elements along axis.
Start and end can be specified as None which is equivalent
to start = 0 and end = load everything to the end, respectively.
Start and end also can be negative using numpy indexing.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tiff-reader-writer">
<h2>TIFF Reader/Writer<a class="headerlink" href="#tiff-reader-writer" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt id="cil.io.TIFFStackReader">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.</span></code><code class="sig-name descname"><span class="pre">TIFFStackReader</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt id="cil.io.TIFFStackReader.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Basic TIFF redaer which loops through all tiff files in a specific
folder and load them in alphabetic order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em><em>, </em><em>abspath to folder</em><em>, </em><em>list</em>) – Path to folder with tiff files, list of paths of tiffs, or single tiff file</p></li>
<li><p><strong>roi</strong> (dictionary, default <cite>None</cite>) – <p>dictionary with roi to load
{‘axis_0’: (start, end, step),</p>
<blockquote>
<div><p>’axis_1’: (start, end, step),
‘axis_2’: (start, end, step)}</p>
</div></blockquote>
<p>Files are stacked along axis_0. axis_1 and axis_2 correspond
to row and column dimensions, respectively.
Files are stacked in alphabetic order.
To skip files or to change number of files to load,
adjust axis_0. For instance, ‘axis_0’: (100, 300)
will skip first 100 files and will load 200 files.
‘axis_0’: -1 is a shortcut to load all elements along axis.
Start and end can be specified as None which is equivalent
to start = 0 and end = load everything to the end, respectively.
Start and end also can be negative.
Notes: roi is specified for axes before transpose.</p>
</p></li>
<li><p><strong>transpose</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to transpose loaded images</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>default 'bin'. Accepted values 'bin'</em><em>, </em><em>'slice'</em>) – Referring to the ‘step’ defined in the roi parameter, in bin mode, ‘step’ number of pixels
are binned together, values of resulting binned pixels are calculated as average.
In ‘slice’ mode ‘step’ defines standard numpy slicing.
Note: in general output array size in bin mode != output array size in slice mode</p></li>
<li><p><strong>dtype</strong> (<em>numpy type</em><em>, </em><em>string</em><em>, </em><em>default np.float32</em>) – Requested type of the read image. If set to None it defaults to the type of the saved file.</p></li>
</ul>
</dd>
</dl>
<p>You can rescale the read data as <cite>rescaled_data = (read_data - offset)/scale</cite> with the following code:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">TIFFStackReader</span><span class="p">(</span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;/path/to/folder&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rescaled_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read_rescaled</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, if TIFFWriter has been used to save data with lossy compression, then you can rescale the
read data to approximately the original data with the following code:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span> <span class="o">=</span> <span class="n">TIFFWriter</span><span class="p">(</span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;/path/to/folder&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">original_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">TIFFStackReader</span><span class="p">(</span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;/path/to/folder&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">about_original_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read_rescaled</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.io.TIFFStackReader.set_up">
<code class="sig-name descname"><span class="pre">set_up</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">file_name=None</span></em>, <em class="sig-param"><span class="pre">roi={'axis_0':</span> <span class="pre">-1</span></em>, <em class="sig-param"><span class="pre">'axis_1':</span> <span class="pre">-1</span></em>, <em class="sig-param"><span class="pre">'axis_2':</span> <span class="pre">-1}</span></em>, <em class="sig-param"><span class="pre">transpose=False</span></em>, <em class="sig-param"><span class="pre">mode='bin'</span></em>, <em class="sig-param"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.set_up"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.set_up" title="Permalink to this definition">#</a></dt>
<dd><p>Set up method for the TIFFStackReader class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em><em>, </em><em>abspath to folder</em><em>, </em><em>list</em>) – Path to folder with tiff files, list of paths of tiffs, or single tiff file</p></li>
<li><p><strong>roi</strong> (dictionary, default <cite>None</cite>) – <p>dictionary with roi to load
{‘axis_0’: (start, end, step),</p>
<blockquote>
<div><p>’axis_1’: (start, end, step),
‘axis_2’: (start, end, step)}</p>
</div></blockquote>
<p>Files are stacked along axis_0. axis_1 and axis_2 correspond
to row and column dimensions, respectively.
Files are stacked in alphabetic order.
To skip files or to change number of files to load,
adjust axis_0. For instance, ‘axis_0’: (100, 300)
will skip first 100 files and will load 200 files.
‘axis_0’: -1 is a shortcut to load all elements along axis.
Start and end can be specified as None which is equivalent
to start = 0 and end = load everything to the end, respectively.
Start and end also can be negative.
Notes: roi is specified for axes before transpose.</p>
</p></li>
<li><p><strong>transpose</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to transpose loaded images</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>default 'bin'. Accepted values 'bin'</em><em>, </em><em>'slice'</em>) – Referring to the ‘step’ defined in the roi parameter, in bin mode, ‘step’ number of pixels
are binned together, values of resulting binned pixels are calculated as average.
In ‘slice’ mode ‘step’ defines standard numpy slicing.
Note: in general output array size in bin mode != output array size in slice mode</p></li>
<li><p><strong>dtype</strong> (<em>numpy type</em><em>, </em><em>string</em><em>, </em><em>default np.float32</em>) – Requested type of the read image. If set to None it defaults to the type of the saved file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.TIFFStackReader.read">
<code class="sig-name descname"><span class="pre">read</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.read" title="Permalink to this definition">#</a></dt>
<dd><p>Reads images and return numpy array</p>
</dd></dl>

<dl class="py attribute">
<dt id="cil.io.TIFFStackReader.__weakref__">
<code class="sig-name descname"><span class="pre">__weakref__</span></code><a class="headerlink" href="#cil.io.TIFFStackReader.__weakref__" title="Permalink to this definition">#</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.TIFFStackReader.read_as_ImageData">
<code class="sig-name descname"><span class="pre">read_as_ImageData</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_geometry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.read_as_ImageData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.read_as_ImageData" title="Permalink to this definition">#</a></dt>
<dd><p>reads the TIFF stack as an ImageData with the provided geometry</p>
<p>Notice that the data will be reshaped to what requested in the geometry but there is
no warranty that the data will be read in the right order!
In facts you can reshape a (2,3,4) array as (3,4,2), however we do not check if the reshape
leads to sensible data.</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.TIFFStackReader.read_as_AcquisitionData">
<code class="sig-name descname"><span class="pre">read_as_AcquisitionData</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acquisition_geometry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.read_as_AcquisitionData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.read_as_AcquisitionData" title="Permalink to this definition">#</a></dt>
<dd><p>reads the TIFF stack as an AcquisitionData with the provided geometry</p>
<p>Notice that the data will be reshaped to what requested in the geometry but there is
no warranty that the data will be read in the right order!
In facts you can reshape a (2,3,4) array as (3,4,2), however we do not check if the reshape
leads to sensible data.</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.TIFFStackReader.read_scale_offset">
<code class="sig-name descname"><span class="pre">read_scale_offset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.read_scale_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.read_scale_offset" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the scale and offset from a json file in the same folder as the tiff stack</p>
<p>This is a courtesy method that will work only if the tiff stack is saved with the TIFFWriter</p>
<p>tuple: (scale, offset)</p>
</dd></dl>

<dl class="py method">
<dt id="cil.io.TIFFStackReader.read_rescaled">
<code class="sig-name descname"><span class="pre">read_rescaled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFStackReader.read_rescaled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFStackReader.read_rescaled" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the TIFF stack and rescales it with the provided scale and offset, or with the ones in the json file if not provided</p>
<p>This is a courtesy method that will work only if the tiff stack is saved with the TIFFWriter</p>
<dl class="simple">
<dt>scale: float, default None</dt><dd><p>scale to apply to the data. If None, the scale will be read from the json file saved by TIFFWriter.</p>
</dd>
<dt>offset: float, default None</dt><dd><p>offset to apply to the data. If None, the offset will be read from the json file saved by TIFFWriter.</p>
</dd>
</dl>
<p>numpy.ndarray in float32</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cil.io.TIFFWriter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.</span></code><code class="sig-name descname"><span class="pre">TIFFWriter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Write a DataSet to disk as a TIFF file or stack</p>
<dl class="py method">
<dt id="cil.io.TIFFWriter.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/TIFF.html#TIFFWriter.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.TIFFWriter.__init__" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="framework.html#cil.framework.DataContainer" title="cil.framework.DataContainer"><em>DataContainer</em></a><em>, </em><a class="reference internal" href="framework.html#cil.framework.AcquisitionData" title="cil.framework.AcquisitionData"><em>AcquisitionData</em></a><em> or </em><a class="reference internal" href="framework.html#cil.framework.ImageData" title="cil.framework.ImageData"><em>ImageData</em></a>) – This represents the data to save to TIFF file(s)</p></li>
<li><p><strong>file_name</strong> (<em>string</em>) – This defines the file name prefix, i.e. the file name without the extension.</p></li>
<li><p><strong>counter_offset</strong> (<em>int</em><em>, </em><em>default 0.</em>) – counter_offset indicates at which number the ordinal index should start.
For instance, if you have to save 10 files the index would by default go from 0 to 9.
By counter_offset you can offset the index: from <cite>counter_offset</cite> to <cite>9+counter_offset</cite></p></li>
<li><p><strong>compression</strong> (<em>str</em><em>, </em><em>default None. Accepted values None</em><em>, </em><em>'uint8'</em><em>, </em><em>'uint16'</em>) – The lossy compression to apply. The default None will not compress data.
‘uint8’ or ‘unit16’ will compress to unsigned int 8 and 16 bit respectively.</p></li>
</ul>
</dd>
</dl>
<p>If compression ‘uint8’ or ‘unit16’ are used, the scale and offset used to compress the data are saved
in a file called <cite>scaleoffset.json</cite> in the same directory as the TIFF file(s).</p>
<p>The original data can be obtained by: <cite>original_data = (compressed_data - offset) / scale</cite></p>
</dd></dl>

<dl class="py attribute">
<dt id="cil.io.TIFFWriter.__weakref__">
<code class="sig-name descname"><span class="pre">__weakref__</span></code><a class="headerlink" href="#cil.io.TIFFWriter.__weakref__" title="Permalink to this definition">#</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hdf5-utilities">
<h2>HDF5 Utilities<a class="headerlink" href="#hdf5-utilities" title="Permalink to this headline">#</a></h2>
<p>Utility functions to browse HDF5 files. These allow you to browse groups and read in datasets as numpy.ndarrays.</p>
<p>A CIL geometry and dataset must be constructed manually from the array and metadata.</p>
<dl class="py class">
<dt id="cil.io.utilities.HDF5_utilities">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">cil.io.utilities.</span></code><code class="sig-name descname"><span class="pre">HDF5_utilities</span></code><a class="reference internal" href="_modules/cil/io/utilities.html#HDF5_utilities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.utilities.HDF5_utilities" title="Permalink to this definition">#</a></dt>
<dd><p>Utility methods to read in from a generic HDF5 file and extract the relevant data</p>
<dl class="py method">
<dt id="cil.io.utilities.HDF5_utilities.print_metadata">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">print_metadata</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/utilities.html#HDF5_utilities.print_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.utilities.HDF5_utilities.print_metadata" title="Permalink to this definition">#</a></dt>
<dd><p>Prints the file metadata</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The full path to the HDF5 file</p></li>
<li><p><strong>group</strong> (<em>(</em><em>str</em><em>)</em><em>, </em><em>default: '/'</em>) – a specific group to print the metadata for, this defaults to the root group</p></li>
<li><p><strong>depth</strong> (<em>int</em><em>, </em><em>default -1</em>) – depth of group to output the metadata for, -1 is fully recursive</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.utilities.HDF5_utilities.get_dataset_metadata">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">get_dataset_metadata</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dset_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/utilities.html#HDF5_utilities.get_dataset_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.utilities.HDF5_utilities.get_dataset_metadata" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the dataset metadata as a dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The full path to the HDF5 file</p></li>
<li><p><strong>dset_path</strong> (<em>str</em>) – The internal path to the requested dataset</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndim, shape, size, dtype, nbytes, compression, chunks, is_virtual</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A dictionary containing keys, values are <cite>None</cite> if attribute can’t be read.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cil.io.utilities.HDF5_utilities.read">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">read</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">filename</span></em>, <em class="sig-param"><span class="pre">dset_path</span></em>, <em class="sig-param"><span class="pre">source_sel=None</span></em>, <em class="sig-param"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/utilities.html#HDF5_utilities.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.utilities.HDF5_utilities.read" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a dataset entry and returns a numpy array with the requested data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The full path to the HDF5 file</p></li>
<li><p><strong>dset_path</strong> (<em>str</em>) – The internal path to the requested dataset</p></li>
<li><p><strong>source_sel</strong> (<em>tuple of slice objects</em><em>, </em><em>optional</em>) – The selection of slices in each source dimension to return</p></li>
<li><p><strong>dtype</strong> (<em>numpy type</em><em>, </em><em>default np.float32</em>) – the numpy data type for the returned array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The requested data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>source_sel takes a tuple of slice objects to defining crop and slicing behaviour</p>
<p>This can be constructed using numpy indexing, i.e. the following lines are equivalent.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">source_sel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">source_sel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">s_</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="cil.io.utilities.HDF5_utilities.read_to">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">read_to</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dset_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_sel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_sel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cil/io/utilities.html#HDF5_utilities.read_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cil.io.utilities.HDF5_utilities.read_to" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a dataset entry and directly fills a numpy array with the requested data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The full path to the HDF5 file</p></li>
<li><p><strong>dset_path</strong> (<em>str</em>) – The internal path to the requested dataset</p></li>
<li><p><strong>out</strong> (<em>numpy.ndarray</em>) – The output array to be filled</p></li>
<li><p><strong>source_sel</strong> (<em>tuple of slice objects</em><em>, </em><em>optional</em>) – The selection of slices in each source dimension to return</p></li>
<li><p><strong>dest_sel</strong> (<em>tuple of slice objects</em><em>, </em><em>optional</em>) – The selection of slices in each destination dimension to fill</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>source_sel and dest_sel take a tuple of slice objects to defining crop and slicing behaviour</p>
<p>This can be constructed using numpy indexing, i.e. the following lines are equivalent.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">source_sel</span> <span class="o">=</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">source_sel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">s_</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<p><a class="reference internal" href="index.html#mastertoc"><span class="std std-ref">Return Home</span></a></p>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="framework.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Framework</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="optimisation.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Optimisation framework</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2017-2021 UKRI-STFC, University of Manchester.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>